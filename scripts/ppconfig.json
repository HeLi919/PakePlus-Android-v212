{"name":"eeadbbaeadadd","url":"https://epay.hnuu.edu.cn/member/wxIndex","showName":"随行校园","appid":"com.eeadbbaeadadd.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":true,"version":"0.1.0","preview":"Android","platform":["1-1","2-2"],"width":412,"height":915,"desc":"","jsFile":[],"filterCss":"","customJs":"// 链接处理 - 更安全的实现\nconst hookClick = (e) => {\n    const origin = e.target.closest('a');\n    \n    // 只在特定条件下处理\n    if (origin && origin.href && origin.target === '_blank') {\n        // 检查是否是外部链接或其他特定条件\n        const isExternal = !origin.href.startsWith(window.location.origin);\n        \n        if (isExternal) {\n            e.preventDefault();\n            // 可以添加确认对话框\n            if (confirm('是否在新窗口打开链接？')) {\n                window.open(origin.href, '_blank');\n            } else {\n                location.href = origin.href;\n            }\n        }\n    }\n};\n\n// 密码管理 - 安全改进版本\nclass PasswordManager {\n    constructor() {\n        this.storageKey = 'encryptedCredentials';\n    }\n    \n    // 简单的加密（实际项目中应该使用更安全的加密方式）\n    encrypt(text) {\n        return btoa(unescape(encodeURIComponent(text)));\n    }\n    \n    decrypt(encrypted) {\n        try {\n            return decodeURIComponent(escape(atob(encrypted)));\n        } catch {\n            return null;\n        }\n    }\n    \n    saveCredentials(username, password, domain) {\n        const credentials = {\n            username: this.encrypt(username),\n            password: this.encrypt(password),\n            domain: domain || window.location.hostname,\n            timestamp: Date.now()\n        };\n        \n        // 只保存当前域名的凭证\n        const key = `${this.storageKey}_${window.location.hostname}`;\n        localStorage.setItem(key, JSON.stringify(credentials));\n    }\n    \n    getCredentials() {\n        const key = `${this.storageKey}_${window.location.hostname}`;\n        const data = localStorage.getItem(key);\n        \n        if (!data) return null;\n        \n        try {\n            const credentials = JSON.parse(data);\n            return {\n                username: this.decrypt(credentials.username),\n                password: this.decrypt(credentials.password)\n            };\n        } catch {\n            return null;\n        }\n    }\n    \n    // 安全的自动填充\n    safeAutoFill() {\n        const credentials = this.getCredentials();\n        if (!credentials) return;\n        \n        // 只在登录页面尝试自动填充\n        const isLoginPage = document.querySelector('input[type=\"password\"]') && \n                           (document.querySelector('input[type=\"text\"]') || \n                            document.querySelector('input[type=\"email\"]'));\n        \n        if (isLoginPage) {\n            setTimeout(() => {\n                this.fillForm(credentials);\n            }, 100);\n        }\n    }\n    \n    fillForm(credentials) {\n        const forms = document.querySelectorAll('form');\n        \n        for (let form of forms) {\n            const passwordField = form.querySelector('input[type=\"password\"]');\n            if (!passwordField) continue;\n            \n            let usernameField = form.querySelector('input[type=\"text\"], input[type=\"email\"]');\n            \n            // 尝试常见用户名字段\n            if (!usernameField) {\n                const usernameSelectors = ['[name=\"username\"]', '[name=\"email\"]', '[name=\"user\"]'];\n                for (let selector of usernameSelectors) {\n                    usernameField = form.querySelector(selector);\n                    if (usernameField) break;\n                }\n            }\n            \n            if (usernameField && passwordField) {\n                usernameField.value = credentials.username;\n                passwordField.value = credentials.password;\n                \n                // 触发change事件\n                usernameField.dispatchEvent(new Event('change', { bubbles: true }));\n                passwordField.dispatchEvent(new Event('change', { bubbles: true }));\n                \n                console.log('自动填充完成');\n                break;\n            }\n        }\n    }\n}\n\n// 初始化密码管理器\nconst passwordManager = new PasswordManager();\n\n// 改进的表单提交处理\nconst handleFormSubmit = (e) => {\n    const form = e.target;\n    let username, password;\n    \n    // 查找密码字段\n    const passwordField = form.querySelector('input[type=\"password\"]');\n    if (!passwordField) return;\n    \n    password = passwordField.value;\n    \n    // 查找用户名字段\n    const usernameFields = ['username', 'email', 'user', 'login'];\n    let usernameField;\n    \n    for (let field of usernameFields) {\n        usernameField = form.querySelector(`[name=\"${field}\"]`) || \n                       form.querySelector(`[id=\"${field}\"]`);\n        if (usernameField) {\n            username = usernameField.value;\n            break;\n        }\n    }\n    \n    // 如果没找到，找第一个文本输入框\n    if (!usernameField) {\n        usernameField = form.querySelector('input[type=\"text\"], input[type=\"email\"]');\n        if (usernameField) {\n            username = usernameField.value;\n        }\n    }\n    \n    if (username && password) {\n        // 询问用户是否保存密码\n        if (confirm('是否保存登录信息？')) {\n            passwordManager.saveCredentials(username, password);\n            console.log('登录信息已安全保存');\n        }\n    }\n};\n\n// 事件监听\ndocument.addEventListener('submit', handleFormSubmit, true);\ndocument.addEventListener('click', hookClick, { capture: true });\n\n// 安全的自动填充\nwindow.addEventListener('DOMContentLoaded', () => {\n    passwordManager.safeAutoFill();\n});","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v212","iosRepo":"PakePlus-iOS-v212","androidRepo":"PakePlus-Android-v212","more":{"windows":{"label":"","title":"随行校园","url":"https://epay.hnuu.edu.cn/member/wxIndex","userAgent":"Mozilla/5.0 (Linux; Android 14; Pixel 6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Mobile Safari/537.36","width":412,"height":915,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"eeadbbaeadadd","showName":"随行校园","version":"0.1.0","webUrl":"https://epay.hnuu.edu.cn/member/wxIndex","id":"com.eeadbbaeadadd.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"eeadbbaeadadd","showName":"随行校园","version":"0.1.0","webUrl":"https://epay.hnuu.edu.cn/member/wxIndex","id":"com.eeadbbaeadadd.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"eeadbbaeadadd","showName":"随行校园","version":"0.1.0","id":"com.eeadbbaeadadd.app.desktop","desc":"","webUrl":"https://epay.hnuu.edu.cn/member/wxIndex","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":true}}